/*!
  * vue-script2 v1.0.0
  * (c) 2016-2016 Greg Slepak
  * @license MIT License
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueScript2=t()}(this,function(){"use strict";function e(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return new Promise(function(o,r){function c(){o(t)}var a=this,d=document.createElement("script");n.defaults2(d,n.omit(i,["unload"]),{type:"text/javascript"}),d.async=!1,d.src=t,d.onload=c,d.onreadystatechange=function(){return"complete"===a.readyState&&c()},d.onerror=function(){return r(new Error("failed to load:"+t))},e.appendChild(d)})}var t={installed:!1,p:Promise.resolve(),version:"1.0.0",loaded:{}};t.install=function(i){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.installed){var o=["unload"],r=o.concat(["src","type","integrity","text","crossorigin"]);i.component("script2",{props:r,template:'<div style="display:none"><slot></slot></div>',ready:function(){var o=this,c=this.$el.parentElement;if(this.src){if(!t.loaded[this.src]){var a=n.omitBy(n.pick(this,r),n.isUndefined);t.loaded[this.src]=!0,t.p=t.p.then(function(){return e(c,o.src,a)})}}else t.p=t.p.then(function(){var e=document.createElement("script");e.type="text/javascript",e.appendChild(document.createTextNode(o.$el.innerHTML)),c.appendChild(e)});i.util.remove(this.$el)},destroyed:function(){this.unload&&(new Function(this.unload)(),delete t.loaded[this.src])}}),t.installed=!0}};var n={isUndefined:function(e){return void 0===e},pick:function(e,t){var n={};return t.forEach(function(t){return n[t]=e[t]}),n},omit:function(e,t){var n={};return Object.keys(e).forEach(function(i){-1===t.indexOf(i)&&(n[i]=e[i])}),n},omitBy:function(e,t){var n={};return Object.keys(e).forEach(function(i){t(e[i])||(n[i]=e[i])}),n},defaults2:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;t>o;o++)i[o-1]=arguments[o];i.forEach(function(t){Object.keys(t).forEach(function(i){!n.isUndefined(e[i])&&""!==e[i]||""===t[i]||(e[i]=t[i])})})}};return t});